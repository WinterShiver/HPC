<!DOCTYPE html> <html lang="zh"> <head> <meta charset="utf-8"/> <title>Markdown在线编辑器 - www.MdEditor.com</title> <link rel="shortcut icon" href="https://www.mdeditor.com/images/logos/favicon.ico" type="image/x-icon"/> </head> <body><h1 id="h1-mpi-rs-"><a name="MPI实现RS纠删码" class="reference-link"></a><span class="header-link octicon octicon-link"></span>MPI实现RS纠删码</h1><p>计试61 张翀 2140506063</p> <h2 id="h2-u9898u76EE"><a name="题目" class="reference-link"></a><span class="header-link octicon octicon-link"></span>题目</h2><p>使用MPI实现RS纠删码。</p> <blockquote> <p>RS纠删码的编码、解码定义如下： </p> <ul> <li>编码：给定n个数据块（Data block）D1、D2……Dn，和一个正整数m，RS根据n个数据块生成m个编码块（Code block），C1、C2……Cm。</li><li>解码：对于任意的n和m，从n个原始数据块和m个编码块中任取n块就能解码出原始数据，即RS最多容忍m个数据块或者编码块同时丢失。</li></ul> </blockquote> <p>简而言之，就是针对n位的数据，建立m行n列的编码矩阵，计算这段数据的m位编码，和数据合并成为这段数据的(n+m)位纠删码。在这段数据中有n位保证正确的位置和值时，无论是原始数据还是编码，都可以求解出原始编码。</p> <p>此处为了简单，要求<code>n=m</code>，编码矩阵使用n维的范德蒙矩阵；而且要求矩阵维度数是进程数的整倍数。</p> <h2 id="h2-u601Du8DEF"><a name="思路" class="reference-link"></a><span class="header-link octicon octicon-link"></span>思路</h2><p>参考<a href="https://blog.csdn.net/qq_29110265/article/details/86519879">^1</a>，实际上解码过程是对一个线性方程组的求解。本次实验通过MPI实现了高斯消元法，通过求解线性方程组来重新解码。</p> <p>高斯消元法的原理：系数矩阵首先变上三角，然后变对角线。在变上三角的时候，每次选取绝对值最大的列主元进行整列的消除。</p> <h2 id="h2-u4EE3u7801"><a name="代码" class="reference-link"></a><span class="header-link octicon octicon-link"></span>代码</h2><p>在这里，我们主要使用<code>Scatter-Gather</code>和<code>BCast</code>两条指令做数据的分发和接收。</p> <h3 id="h3-scatter-gather"><a name="Scatter-Gather" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Scatter-Gather</h3><p>在这次实验的程序设计中，经常需要把计算任务<strong>全覆盖、不重叠地</strong>分给各个进程做，所以用<code>Scatter</code>分发，用<code>Gather</code>接收比较合适。<br>以下是<code>MPI_Scatter</code>的函数原型：</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="lang-cpp"><span class="typ">int</span><span class="pln"> MPI_Scatter</span><span class="pun">(</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln"> </span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> send_data</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> send_count</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln"> MPI_Datatype send_datatype</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln"> </span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> recv_data</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> recv_count</span><span class="pun">,</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln"> MPI_Datatype recv_datatype</span><span class="pun">,</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> root</span><span class="pun">,</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln"> MPI_Comm communicator</span></code></li><li class="L9"><code class="lang-cpp"><span class="pun">);</span></code></li></ol></pre> <p>对于需要分发的消息，需要指定源数据、数据类型和广播消息的进程，并指定发送给每个进程的数据量，以及每个进程接收数据的位置指针。执行这条命令之后，按照进程号顺序，指定数据会分发给每一个进程。<br>以下是<code>MPI_Gather</code>的函数原型：</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="lang-cpp"><span class="typ">int</span><span class="pln"> MPI_Gather</span><span class="pun">(</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln"> </span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> send_data</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> send_count</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln"> MPI_Datatype send_datatype</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln"> </span><span class="kwd">void</span><span class="pun">*</span><span class="pln"> recv_data</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> recv_count</span><span class="pun">,</span></code></li><li class="L6"><code class="lang-cpp"><span class="pln"> MPI_Datatype recv_datatype</span><span class="pun">,</span></code></li><li class="L7"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> root</span><span class="pun">,</span></code></li><li class="L8"><code class="lang-cpp"><span class="pln"> MPI_Comm communicator</span></code></li><li class="L9"><code class="lang-cpp"><span class="pun">)</span></code></li></ol></pre> <p>参数基本相同，从部分数据变量中读取数据，按照进程号顺序被目标进程收集。<br>注意：使用<code>Scatter</code>分配数据后，每个进程分配的部分矩阵具有完全相等的规模。<br>另外，主进程也要参与数据分发。 </p><h3 id="h3-broadcast"><a name="Broadcast" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Broadcast</h3><p>在这次实验的程序设计中，我们经常需要把一个完整的只读信息发给各个进程，所以用<code>BCast</code>分发比较合适。<br>以下是<code>MPI_Bcast</code>的函数原型：</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="lang-cpp"><span class="typ">int</span><span class="pln"> MPI_Bcast</span><span class="pun">(</span></code></li><li class="L1"><code class="lang-cpp"><span class="pln"> </span><span class="kwd">void</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> data_p</span><span class="pun">;</span></code></li><li class="L2"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> count</span><span class="pun">;</span></code></li><li class="L3"><code class="lang-cpp"><span class="pln"> MPI_Datatype datatype</span><span class="pun">;</span></code></li><li class="L4"><code class="lang-cpp"><span class="pln"> </span><span class="typ">int</span><span class="pln"> source_proc</span><span class="pun">;</span></code></li><li class="L5"><code class="lang-cpp"><span class="pln"> MPI_Comm comm</span><span class="pun">;</span></code></li><li class="L6"><code class="lang-cpp"><span class="pun">);</span></code></li></ol></pre> <p><code>MPI_Bcast</code>要求所有进程保有同一个变量指针，然后从一个进程的对应位置复制数据，拷贝到其他进程。</p> <h3 id="h3-u5B9Eu9645u8BBEu8BA1"><a name="实际设计" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实际设计</h3><p>代码在高斯消元法的如下环节并行：</p> <ul> <li>寻找列主元：每个进程负责检查一部分列元素，然后整合结果</li><li>消除（变上三角时）：每个进程负责一部分互减。每个进程传入一部分行，进行互减，减完后合并结果。</li><li>消除（变对角线时）：每个进程负责一部分互减。在实现时为了简单，采用了和上一步消除相同的方法，但实际上不需要传入整个的B矩阵行，只需要更新对应的列就可以了。传入整个的BG稍微有些浪费内存，这也是代码下一步优化的方向。</li></ul> <p>几次并行的通信均选用<code>Scatter-Gather</code>，而辅助信息的广播使用<code>BCast</code>.</p> <p>因为代码太长，所以不在报告中体现，可以参考随报告的附件。</p> <h2 id="h2-u5B9Eu9A8Cu7ED3u679C"><a name="实验结果" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实验结果</h2><p>使用如下命令编译并执行：<code>mpicxx main.cpp &amp;&amp; mpiexec -n num_processes ./a.out mat_dim</code>，执行可执行文件时带的两个参数分别是矩阵维度和使用的进程数。</p> <h3 id="h3-u7A0Bu5E8Fu7684u6B63u786Eu6027"><a name="程序的正确性" class="reference-link"></a><span class="header-link octicon octicon-link"></span>程序的正确性</h3><p>因为较大的范德蒙矩阵的元素大小可以非常大，数据类型无法支持较大数的存储，所以无法进行位数较多的纠删码的实验。以下展示2位数据和8位数据的实验结果：</p> <p>执行命令<code>mpicxx main.cpp &amp;&amp; mpiexec -n 2 ./a.out 2</code>，使用2个进程，产生2位数据并对其进行编码解码。</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code><span class="pln">A</span><span class="pun">:</span></code></li><li class="L1"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L2"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L3"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L4"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">2</span></code></li><li class="L5"><code><span class="pln">d</span><span class="pun">:</span></code></li><li class="L6"><code><span class="lit">3</span></code></li><li class="L7"><code><span class="lit">4</span></code></li><li class="L8"><code><span class="pln">e</span><span class="pun">:</span></code></li><li class="L9"><code><span class="lit">3</span></code></li><li class="L0"><code><span class="lit">4</span></code></li><li class="L1"><code><span class="lit">7</span></code></li><li class="L2"><code><span class="lit">11</span></code></li></ol></pre><p>原始数据为[3 4]，编码后数据为[3 4 7 11].随机去除一半数位之后情况如下：</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code><span class="pln">B</span><span class="pun">:</span></code></li><li class="L1"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L2"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L3"><code><span class="pln">g</span><span class="pun">:</span></code></li><li class="L4"><code><span class="lit">3</span></code></li><li class="L5"><code><span class="lit">7</span></code></li></ol></pre><p>经过高斯消元法求解，获得结果如下：</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code><span class="pln">B</span><span class="pun">:</span></code></li><li class="L1"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L2"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L3"><code><span class="pln">g</span><span class="pun">:</span></code></li><li class="L4"><code><span class="lit">3</span></code></li><li class="L5"><code><span class="lit">4</span></code></li></ol></pre><p>数据已经被正确还原。</p> <p>以下是8位数据的编码，丢失，还原过程，数据能够被正确还原：</p> <pre class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code><span class="pln">A</span><span class="pun">:</span></code></li><li class="L1"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L2"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L3"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L4"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L5"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L6"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L7"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L8"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L9"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L0"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">5</span><span class="pln"> </span><span class="lit">6</span><span class="pln"> </span><span class="lit">7</span><span class="pln"> </span><span class="lit">8</span></code></li><li class="L1"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> </span><span class="lit">36</span><span class="pln"> </span><span class="lit">49</span><span class="pln"> </span><span class="lit">64</span></code></li><li class="L2"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">8</span><span class="pln"> </span><span class="lit">27</span><span class="pln"> </span><span class="lit">64</span><span class="pln"> </span><span class="lit">125</span><span class="pln"> </span><span class="lit">216</span><span class="pln"> </span><span class="lit">343</span><span class="pln"> </span><span class="lit">512</span></code></li><li class="L3"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="lit">81</span><span class="pln"> </span><span class="lit">256</span><span class="pln"> </span><span class="lit">625</span><span class="pln"> </span><span class="lit">1296</span><span class="pln"> </span><span class="lit">2401</span><span class="pln"> </span><span class="lit">4096</span></code></li><li class="L4"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">32</span><span class="pln"> </span><span class="lit">243</span><span class="pln"> </span><span class="lit">1024</span><span class="pln"> </span><span class="lit">3125</span><span class="pln"> </span><span class="lit">7776</span><span class="pln"> </span><span class="lit">16807</span><span class="pln"> </span><span class="lit">32768</span></code></li><li class="L5"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">64</span><span class="pln"> </span><span class="lit">729</span><span class="pln"> </span><span class="lit">4096</span><span class="pln"> </span><span class="lit">15625</span><span class="pln"> </span><span class="lit">46656</span><span class="pln"> </span><span class="lit">117649</span><span class="pln"> </span><span class="lit">262144</span></code></li><li class="L6"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">128</span><span class="pln"> </span><span class="lit">2187</span><span class="pln"> </span><span class="lit">16384</span><span class="pln"> </span><span class="lit">78125</span><span class="pln"> </span><span class="lit">279936</span><span class="pln"> </span><span class="lit">823543</span><span class="pln"> </span><span class="lit">2.09715e+06</span></code></li><li class="L7"><code><span class="pln">d</span><span class="pun">:</span></code></li><li class="L8"><code><span class="lit">3</span></code></li><li class="L9"><code><span class="lit">4</span></code></li><li class="L0"><code><span class="lit">4</span></code></li><li class="L1"><code><span class="lit">4</span></code></li><li class="L2"><code><span class="lit">1</span></code></li><li class="L3"><code><span class="lit">4</span></code></li><li class="L4"><code><span class="lit">0</span></code></li><li class="L5"><code><span class="lit">4</span></code></li><li class="L6"><code><span class="pln">e</span><span class="pun">:</span></code></li><li class="L7"><code><span class="lit">3</span></code></li><li class="L8"><code><span class="lit">4</span></code></li><li class="L9"><code><span class="lit">4</span></code></li><li class="L0"><code><span class="lit">4</span></code></li><li class="L1"><code><span class="lit">1</span></code></li><li class="L2"><code><span class="lit">4</span></code></li><li class="L3"><code><span class="lit">0</span></code></li><li class="L4"><code><span class="lit">4</span></code></li><li class="L5"><code><span class="lit">24</span></code></li><li class="L6"><code><span class="lit">100</span></code></li><li class="L7"><code><span class="lit">544</span></code></li><li class="L8"><code><span class="lit">3436</span></code></li><li class="L9"><code><span class="lit">23608</span></code></li><li class="L0"><code><span class="lit">170500</span></code></li><li class="L1"><code><span class="lit">1.27038e+06</span></code></li><li class="L2"><code><span class="lit">9.66128e+06</span></code></li><li class="L3"><code><span class="pln">B</span><span class="pun">:</span></code></li><li class="L4"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L5"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L6"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L7"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L8"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L9"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L0"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L1"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> </span><span class="lit">36</span><span class="pln"> </span><span class="lit">49</span><span class="pln"> </span><span class="lit">64</span></code></li><li class="L2"><code><span class="pln">g</span><span class="pun">:</span></code></li><li class="L3"><code><span class="lit">3</span></code></li><li class="L4"><code><span class="lit">4</span></code></li><li class="L5"><code><span class="lit">4</span></code></li><li class="L6"><code><span class="lit">1</span></code></li><li class="L7"><code><span class="lit">4</span></code></li><li class="L8"><code><span class="lit">4</span></code></li><li class="L9"><code><span class="lit">24</span></code></li><li class="L0"><code><span class="lit">544</span></code></li><li class="L1"><code><span class="typ">Reduce</span><span class="pln"> to up</span><span class="pun">-</span><span class="pln">right triangle </span><span class="kwd">begin</span></code></li><li class="L2"><code><span class="typ">Reduce</span><span class="pln"> to up</span><span class="pun">-</span><span class="pln">right triangle </span><span class="kwd">end</span></code></li><li class="L3"><code><span class="pln">B</span><span class="pun">:</span></code></li><li class="L4"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L5"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.4</span><span class="pln"> </span><span class="pun">-</span><span class="lit">4.2</span><span class="pln"> </span><span class="pun">-</span><span class="lit">6.4</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9</span><span class="pln"> </span><span class="pun">-</span><span class="lit">12</span></code></li><li class="L6"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.75</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.66667</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3.75</span><span class="pln"> </span><span class="pun">-</span><span class="lit">5</span></code></li><li class="L7"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.52381</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.14286</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.85714</span></code></li><li class="L8"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.40625</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.875</span></code></li><li class="L9"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L0"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.25</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pln"> </span><span class="pun">-</span><span class="lit">5.25</span><span class="pln"> </span><span class="pun">-</span><span class="lit">8</span><span class="pln"> </span><span class="pun">-</span><span class="lit">11.25</span><span class="pln"> </span><span class="pun">-</span><span class="lit">15</span></code></li><li class="L1"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> </span><span class="lit">36</span><span class="pln"> </span><span class="lit">49</span><span class="pln"> </span><span class="lit">64</span></code></li><li class="L2"><code><span class="pln">g</span><span class="pun">:</span></code></li><li class="L3"><code><span class="lit">3</span></code></li><li class="L4"><code><span class="pun">-</span><span class="lit">87.4</span></code></li><li class="L5"><code><span class="pun">-</span><span class="lit">32.4167</span></code></li><li class="L6"><code><span class="pun">-</span><span class="lit">17.5238</span></code></li><li class="L7"><code><span class="pun">-</span><span class="lit">7.5</span></code></li><li class="L8"><code><span class="lit">4</span></code></li><li class="L9"><code><span class="pun">-</span><span class="lit">114.25</span></code></li><li class="L0"><code><span class="lit">541</span></code></li><li class="L1"><code><span class="typ">Reduce</span><span class="pln"> to diagram </span><span class="kwd">begin</span></code></li><li class="L2"><code><span class="typ">Initial</span><span class="pln"> bg </span><span class="kwd">in</span><span class="pln"> diagram</span></code></li><li class="L3"><code><span class="typ">Bg</span><span class="pun">:</span></code></li><li class="L4"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">3</span></code></li><li class="L5"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.4</span><span class="pln"> </span><span class="pun">-</span><span class="lit">4.2</span><span class="pln"> </span><span class="pun">-</span><span class="lit">6.4</span><span class="pln"> </span><span class="pun">-</span><span class="lit">9</span><span class="pln"> </span><span class="pun">-</span><span class="lit">12</span><span class="pln"> </span><span class="pun">-</span><span class="lit">87.4</span></code></li><li class="L6"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.75</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.66667</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3.75</span><span class="pln"> </span><span class="pun">-</span><span class="lit">5</span><span class="pln"> </span><span class="pun">-</span><span class="lit">32.4167</span></code></li><li class="L7"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.52381</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.14286</span><span class="pln"> </span><span class="pun">-</span><span class="lit">2.85714</span><span class="pln"> </span><span class="pun">-</span><span class="lit">17.5238</span></code></li><li class="L8"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.40625</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.875</span><span class="pln"> </span><span class="pun">-</span><span class="lit">7.5</span></code></li><li class="L9"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">4</span></code></li><li class="L0"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1.25</span><span class="pln"> </span><span class="pun">-</span><span class="lit">3</span><span class="pln"> </span><span class="pun">-</span><span class="lit">5.25</span><span class="pln"> </span><span class="pun">-</span><span class="lit">8</span><span class="pln"> </span><span class="pun">-</span><span class="lit">11.25</span><span class="pln"> </span><span class="pun">-</span><span class="lit">15</span><span class="pln"> </span><span class="pun">-</span><span class="lit">114.25</span></code></li><li class="L1"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="lit">9</span><span class="pln"> </span><span class="lit">16</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> </span><span class="lit">36</span><span class="pln"> </span><span class="lit">49</span><span class="pln"> </span><span class="lit">64</span><span class="pln"> </span><span class="lit">541</span></code></li><li class="L2"><code><span class="typ">Time</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.0015676</span></code></li><li class="L3"><code><span class="typ">Reduce</span><span class="pln"> to diagram </span><span class="kwd">end</span></code></li><li class="L4"><code><span class="pln">B</span><span class="pun">:</span></code></li><li class="L5"><code><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L6"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L7"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L8"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L9"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L0"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span></code></li><li class="L1"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L2"><code><span class="lit">0</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="lit">0</span></code></li><li class="L3"><code><span class="pln">g</span><span class="pun">:</span></code></li><li class="L4"><code><span class="lit">3</span></code></li><li class="L5"><code><span class="lit">4</span></code></li><li class="L6"><code><span class="lit">1</span></code></li><li class="L7"><code><span class="lit">4</span></code></li><li class="L8"><code><span class="pun">-</span><span class="lit">6.31594e-16</span></code></li><li class="L9"><code><span class="lit">4</span></code></li><li class="L0"><code><span class="lit">4</span></code></li><li class="L1"><code><span class="lit">4</span></code></li></ol></pre><h3 id="h3-u7A0Bu5E8Fu7684u6267u884Cu6027u80FD"><a name="程序的执行性能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>程序的执行性能</h3><table> <thead> <tr> <th style="text-align:center">线程数</th> <th style="text-align:center">1</th> <th style="text-align:center">2</th> </tr> </thead> <tbody> <tr> <td style="text-align:center">2</td> <td style="text-align:center">0.000371695</td> <td style="text-align:center">0.000465631</td> </tr> <tr> <td style="text-align:center">4</td> <td style="text-align:center">0.000828505</td> <td style="text-align:center">0.000927448</td> </tr> <tr> <td style="text-align:center">6</td> <td style="text-align:center">0.00101304</td> <td style="text-align:center">0.00135946</td> </tr> <tr> <td style="text-align:center">8</td> <td style="text-align:center">0.00204182</td> <td style="text-align:center">0.00223827</td> </tr> </tbody> </table> <p>在这种计算量较小的任务中，因为通信的任务量相对占比较大，所以2进程并行的时间加速比有限，甚至不如1进程串行的速度。尽管如此，在计算量较大的任务中，仍然能体现出并行的时间优势。</p> <h2 id="h2-u53C2u8003"><a name="参考" class="reference-link"></a><span class="header-link octicon octicon-link"></span>参考</h2></body> </html>